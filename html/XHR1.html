<!DOCTYPE html>

<html lang="ko">
<head>
<meta charset=UTF-8>
<title>XHR1</title>
<script>

    window.onload = function(){
        //이벤트가 로드되면 익명함수를 호출한다.
  
        // XHR를 이용한 동기식 요청처리
        //-----------------------------------------------------//
        // 1. var XMLHttpRequest: new() => XMLHttpRequest
        //-----------------------------------------------------//

        var xhr = new XMLHttpRequest();
        console.log('1.xhr:',xhr);
        console.log('\t+ readyState:', xhr.readyState);

        //-----------------------------------------------------//
        // 2. (method) XMLHttpRequest.open(
        //  method: string,   // HTTP method: GET, POST
        //  url: string,      // action URL
        //  async: boolean,   // false: 동기, true: 비동기
        //  username?: string, // HTTP basic인증을 위한 아이디, 암호 - 요즘에 쓰지 않음
        //  password?: string
        //  ): void (+1 overload)
        //-----------------------------------------------------//

        // 동기식, GET방식, 요청을 보내는 URL 주소 지정
        // xhr.open('GET','http://localhost:8080/doc/persons.json?name=jiwon&age=28', false);
        // xhr.open('POST','http://localhost:8080/doc/persons.json', false);

        xhr.open('GET','/doc/people.json', false);

        console.log('2. xhr:',xhr);
        console.log('\t+ readyState:', xhr.readyState);

        //-----------------------------------------------------//
        // 3. method) XMLHttpRequest.send(body?: Document | BodyInit): void
        //-----------------------------------------------------//
        // xhr.send('name=jiwon&age=28')

        xhr.send(); // 지금은 보낼게 없어서 비워둠

        console.log('3. xhr',xhr);
        console.log('\t+ readyState:', xhr.readyState);

        // 4. XHR로 보낸 요청과 그 응답 데이터를 이용해서,
        // 현재 문서의 <body>태그의 컨텐츠로 지정
        document.body.innerHTML = xhr.responseText; // 응답데이터

    } // onload
</script>
</head>
<body>

</body>
</html>